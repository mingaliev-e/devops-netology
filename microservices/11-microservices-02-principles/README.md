# Домашнее задание к занятию «Микросервисы: принципы»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

Для обеспечения реализации API Gateway можно использовать следующие популярные программные решения: Kong, Tyk, Apigee, AWS API Gateway, Azure API Management.

Сравнительная таблица возможностей различных программных решений:

| Решение           | Маршрутизация запросов | Проверка аутентификации | HTTPS |
|:------------------|:-----------------------|:------------------------|:------|
| Kong              | Да                     | Да                      | Да    |
| Tyk               | Да                     | Да                      | Да    |
| Apigee            | Да                     | Да                      | Да    |
| AWS API Gateway   | Да                     | Да                      | Да    |
| Azure API Manager | Да                     | Да                      | Да    |

На основе таблицы можно сделать вывод, что все рассмотренные решения отвечают требованиям. 
Однако Kong и Tyk являются открытыми и легковесными решениями, что делает их предпочтительнее в случае необходимости более гибкой конфигурации и масштабирования. Поэтому я рекомендую использовать Kong.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

Для выбора брокера сообщений можно рассмотреть следующие популярные решения: RabbitMQ, Apache Kafka, ActiveMQ, NATS, Redis.

Сравнительная таблица возможностей различных брокеров сообщений:

| Решение       | Кластеризация | Хранение сообщений на диске | Скорость работы | Поддержка форматов |Разделение прав доступа| Простота эксплуатации |
|:--------------|:--------------|:----------------------------|:----------------|:-------------------|:------|:----------------------|
| RabbitMQ      | Да            | Да                          | Высокая         | Да                 |Да| Средняя               |
| Apache Kafka	 | Да            | Да                          | Очень высокая   | Да                 |Да| Сложная               |
| ActiveMQ      | Да            | Да                          | Средняя         | Да                 |Да| Средняя               |
| NATS          | Да            | Нет                         | Очень высокая   | Да                 |Да| Простая               |
| Redis         | Да            | Нет                         | Очень высокая   | Да                 |Да| Простая               |

Исходя из требований, можно определить, что Apache Kafka, NATS и Redis удовлетворяют всем требованиям. 

Однако Apache Kafka имеет избыточную функциональность и некоторые функции, такие как управление доступом к данным, сложны в использовании. 

NATS не подходит в случае, если требуется хранение сообщений на диске в процессе доставки. 

RabbitMQ является хорошим решением для брокера сообщений и, как показывает таблица, удовлетворяет большинству требований, в том числе кластеризация, хранение сообщений на диске, поддержка различных форматов сообщений, разделение прав доступа. Однако, по сравнению с Apache Kafka и NATS у него чуть меньшая скорость работы и средняя простота эксплуатации. В конечном счете, выбор зависит от требований конкретного проекта и возможностей инфраструктуры. 
Если скорость и простота эксплуатации являются приоритетом, то Redis может быть более подходящим вариантом, но если требования к хранению и обработке данных не настолько высоки, то RabbitMQ может быть достаточно хорошим решением для микросервисной архитектуры.

Поэтому я рекомендую использовать Redis, который обладает высокой скоростью работы, поддержкой различных форматов сообщений, разделением прав доступа и простотой эксплуатации.