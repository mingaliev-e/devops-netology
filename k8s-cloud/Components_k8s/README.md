# Домашнее задание к занятию «Компоненты Kubernetes»

### Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.
6. 
Расчет ресурсов для каждого компонента:

База данных:

ОЗУ: 4 ГБ * 3 (копии) = 12 ГБ
CPU: 1 ядро * 3 (копии) = 3 ядра

Кеш:

ОЗУ: 4 ГБ * 3 (копии) = 12 ГБ
CPU: 1 ядро * 3 (копии) = 3 ядра

Фронтенд:

ОЗУ: 50 МБ * 5 (копий) = 250 МБ
CPU: 0.2 ядра * 5 (копий) = 1 ядро

Бекенд:

ОЗУ: 600 МБ * 10 (копий) = 6000 МБ = 6 ГБ
CPU: 1 ядро * 10 (копий) = 10 ядер

Количество рабочих нод для каждого компонента:

База данных и Кеш:

Рекомендуемый узел: 8 ГБ ОЗУ, 2 ядра

Фронтенд:

Рекомендуемый узел: 1 ГБ ОЗУ, 0.5 ядра

Бекенд:

Рекомендуемый узел: 2 ГБ ОЗУ, 1 ядро

Рассчитаем количество нод для каждого компонента:

База данных и Кеш:

Количество нод = (Общая требуемая ОЗУ) / (ОЗУ на узел) = (12 ГБ + 12 ГБ) / 8 ГБ = 3 ноды

Фронтенд:

Количество нод = (Общая требуемая ОЗУ) / (ОЗУ на узел) = 250 МБ / 1 ГБ = 1 нода

Бекенд:

Количество нод = (Общая требуемая ОЗУ) / (ОЗУ на узел) = 6 ГБ / 2 ГБ = 3 ноды

Учтем запас и отказоустойчивость:

Добавим запас, учитывая выход из строя как минимум одной ноды, для каждого компонента:

База данных и Кеш:

Общее количество нод = 3 ноды + 1 (запас) = 4 ноды

Фронтенд:

Общее количество нод = 1 нода + 1 (запас) = 2 ноды

Бекенд:

Общее количество нод = 3 ноды + 1 (запас) = 4 ноды

Учтем служебные ресурсы:
Добавим служебные ресурсы для каждого типа нод:

База данных и Кеш: 4 ноды с рекомендуемыми ресурсами и дополнительными служебными ресурсами.

Фронтенд: 2 ноды с рекомендуемыми ресурсами и дополнительными служебными ресурсами.

Бекенд: 4 ноды с рекомендуемыми ресурсами и дополнительными служебными ресурсами.

Общее количество нод: 

Мастер-ноды: 3 ноды (для обеспечения отказоустойчивости и высокой доступности управления кластером).

Рабочие (worker) ноды: 10 нод (для размещения компонентов проекта)